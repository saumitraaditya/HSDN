<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DhcpConfig.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">onos-app-dhcp</a> &gt; <a href="index.source.html" class="el_package">org.onosproject.dhcp.impl</a> &gt; <span class="el_source">DhcpConfig.java</span></div><h1>DhcpConfig.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2015-present Open Networking Laboratory
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.onosproject.dhcp.impl;

import org.onlab.packet.Ip4Address;
import org.onlab.packet.MacAddress;
import org.onosproject.core.ApplicationId;
import org.onosproject.net.config.Config;
import org.onosproject.net.config.basics.BasicElementConfig;

import static org.onosproject.net.config.Config.FieldPresence.MANDATORY;
import static org.onosproject.net.config.Config.FieldPresence.OPTIONAL;

/**
 * DHCP Config class.
 */
<span class="nc" id="L30">public class DhcpConfig extends Config&lt;ApplicationId&gt; {</span>

    public static final String MY_IP = &quot;ip&quot;;
    public static final String MY_MAC = &quot;mac&quot;;
    public static final String SUBNET_MASK = &quot;subnet&quot;;
    public static final String BROADCAST_ADDRESS = &quot;broadcast&quot;;
    public static final String ROUTER_ADDRESS = &quot;router&quot;;
    public static final String DOMAIN_SERVER = &quot;domain&quot;;
    public static final String TTL = &quot;ttl&quot;;
    public static final String LEASE_TIME = &quot;lease&quot;;
    public static final String RENEW_TIME = &quot;renew&quot;;
    public static final String REBIND_TIME = &quot;rebind&quot;;
    public static final String TIMER_DELAY = &quot;delay&quot;;
    public static final String DEFAULT_TIMEOUT = &quot;timeout&quot;;
    public static final String START_IP = &quot;startip&quot;;
    public static final String END_IP = &quot;endip&quot;;

    public static final int DEFAULT = -1;

    @Override
    public boolean isValid() {
        // FIXME: Sweep through and revisit the validation assertions
        // For now, this is just a demonstration of potential uses
<span class="nc bnc" id="L53" title="All 2 branches missed.">        return hasOnlyFields(MY_IP, MY_MAC, SUBNET_MASK, BROADCAST_ADDRESS,</span>
                             ROUTER_ADDRESS, DOMAIN_SERVER, TTL, LEASE_TIME,
                             RENEW_TIME, REBIND_TIME, TIMER_DELAY, DEFAULT_TIMEOUT,
                             START_IP, END_IP) &amp;&amp;
<span class="nc bnc" id="L57" title="All 4 branches missed.">                isIpAddress(MY_IP, MANDATORY) &amp;&amp; isMacAddress(MY_MAC, MANDATORY) &amp;&amp;</span>
<span class="nc bnc" id="L58" title="All 4 branches missed.">                isIpAddress(START_IP, MANDATORY) &amp;&amp; isIpAddress(END_IP, MANDATORY) &amp;&amp;</span>
<span class="nc bnc" id="L59" title="All 4 branches missed.">                isNumber(LEASE_TIME, OPTIONAL, 1) &amp;&amp; isNumber(REBIND_TIME, OPTIONAL, 1) &amp;&amp;</span>
<span class="nc bnc" id="L60" title="All 2 branches missed.">                isNumber(DEFAULT_TIMEOUT, OPTIONAL, 1, 3600);</span>
    }

    /**
     * Returns the dhcp server ip.
     *
     * @return ip address or null if not set
     */
    public Ip4Address ip() {
<span class="nc" id="L69">        String ip = get(MY_IP, null);</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">        return ip != null ? Ip4Address.valueOf(ip) : null;</span>
    }

    /**
     * Sets the dhcp server ip.
     *
     * @param ip new ip address; null to clear
     * @return self
     */
    public BasicElementConfig ip(String ip) {
<span class="nc" id="L80">        return (BasicElementConfig) setOrClear(MY_IP, ip);</span>
    }

    /**
     * Returns the dhcp server mac.
     *
     * @return server mac or null if not set
     */
    public MacAddress mac() {
<span class="nc" id="L89">        String mac = get(MY_MAC, null);</span>
<span class="nc bnc" id="L90" title="All 2 branches missed.">        return mac != null ? MacAddress.valueOf(mac) : null;</span>
    }

    /**
     * Sets the dhcp server mac.
     *
     * @param mac new mac address; null to clear
     * @return self
     */
    public BasicElementConfig mac(String mac) {
<span class="nc" id="L100">        return (BasicElementConfig) setOrClear(MY_MAC, mac);</span>
    }

    /**
     * Returns the subnet mask.
     *
     * @return subnet mask or null if not set
     */
    public Ip4Address subnetMask() {
<span class="nc" id="L109">        String ip = get(SUBNET_MASK, null);</span>
<span class="nc bnc" id="L110" title="All 2 branches missed.">        return ip != null ? Ip4Address.valueOf(ip) : null;</span>
    }

    /**
     * Sets the subnet mask.
     *
     * @param subnet new subnet mask; null to clear
     * @return self
     */
    public BasicElementConfig subnetMask(String subnet) {
<span class="nc" id="L120">        return (BasicElementConfig) setOrClear(SUBNET_MASK, subnet);</span>
    }

    /**
     * Returns the broadcast address.
     *
     * @return broadcast address or null if not set
     */
    public Ip4Address broadcastAddress() {
<span class="nc" id="L129">        String ip = get(BROADCAST_ADDRESS, null);</span>
<span class="nc bnc" id="L130" title="All 2 branches missed.">        return ip != null ? Ip4Address.valueOf(ip) : null;</span>
    }

    /**
     * Sets the broadcast address.
     *
     * @param broadcast new broadcast address; null to clear
     * @return self
     */
    public BasicElementConfig broadcastAddress(String broadcast) {
<span class="nc" id="L140">        return (BasicElementConfig) setOrClear(BROADCAST_ADDRESS, broadcast);</span>
    }

    /**
     * Returns the Time To Live for the reply packets.
     *
     * @return ttl or -1 if not set
     */
    public int ttl() {
<span class="nc" id="L149">        return get(TTL, DEFAULT);</span>
    }

    /**
     * Sets the Time To Live for the reply packets.
     *
     * @param ttl new ttl; null to clear
     * @return self
     */
    public BasicElementConfig ttl(int ttl) {
<span class="nc" id="L159">        return (BasicElementConfig) setOrClear(TTL, ttl);</span>
    }

    /**
     * Returns the Lease Time offered by the DHCP Server.
     *
     * @return lease time or -1 if not set
     */
    public int leaseTime() {
<span class="nc" id="L168">        return get(LEASE_TIME, DEFAULT);</span>
    }

    /**
     * Sets the Lease Time offered by the DHCP Server.
     *
     * @param lease new lease time; null to clear
     * @return self
     */
    public BasicElementConfig leaseTime(int lease) {
<span class="nc" id="L178">        return (BasicElementConfig) setOrClear(LEASE_TIME, lease);</span>
    }

    /**
     * Returns the Renew Time offered by the DHCP Server.
     *
     * @return renew time or -1 if not set
     */
    public int renewTime() {
<span class="nc" id="L187">        return get(RENEW_TIME, DEFAULT);</span>
    }

    /**
     * Sets the Renew Time offered by the DHCP Server.
     *
     * @param renew new renew time; null to clear
     * @return self
     */
    public BasicElementConfig renewTime(int renew) {
<span class="nc" id="L197">        return (BasicElementConfig) setOrClear(RENEW_TIME, renew);</span>
    }

    /**
     * Returns the Rebind Time offered by the DHCP Server.
     *
     * @return rebind time or -1 if not set
     */
    public int rebindTime() {
<span class="nc" id="L206">        return get(REBIND_TIME, DEFAULT);</span>
    }

    /**
     * Sets the Rebind Time offered by the DHCP Server.
     *
     * @param rebind new rebind time; null to clear
     * @return self
     */
    public BasicElementConfig rebindTime(int rebind) {
<span class="nc" id="L216">        return (BasicElementConfig) setOrClear(REBIND_TIME, rebind);</span>
    }

    /**
     * Returns the Router Address.
     *
     * @return router address or null if not set
     */
    public Ip4Address routerAddress() {
<span class="nc" id="L225">        String ip = get(ROUTER_ADDRESS, null);</span>
<span class="nc bnc" id="L226" title="All 2 branches missed.">        return ip != null ? Ip4Address.valueOf(ip) : null;</span>
    }

    /**
     * Sets the Router Address.
     *
     * @param router new router address; null to clear
     * @return self
     */
    public BasicElementConfig routerAddress(String router) {
<span class="nc" id="L236">        return (BasicElementConfig) setOrClear(ROUTER_ADDRESS, router);</span>
    }

    /**
     * Returns the Domain Server Address.
     *
     * @return domain server address or null if not set
     */
    public Ip4Address domainServer() {
<span class="nc" id="L245">        String ip = get(DOMAIN_SERVER, null);</span>
<span class="nc bnc" id="L246" title="All 2 branches missed.">        return ip != null ? Ip4Address.valueOf(ip) : null;</span>
    }

    /**
     * Sets the Domain Server Address.
     *
     * @param domain new domain server address; null to clear
     * @return self
     */
    public BasicElementConfig domainServer(String domain) {
<span class="nc" id="L256">        return (BasicElementConfig) setOrClear(DOMAIN_SERVER, domain);</span>
    }

    /**
     * Returns the delay in minutes after which the dhcp server will purge expired entries.
     *
     * @return time delay or -1 if not set
     */
    public int timerDelay() {
<span class="nc" id="L265">        return get(TIMER_DELAY, DEFAULT);</span>
    }

    /**
     * Sets the delay after which the dhcp server will purge expired entries.
     *
     * @param delay new time delay; null to clear
     * @return self
     */
    public BasicElementConfig timerDelay(int delay) {
<span class="nc" id="L275">        return (BasicElementConfig) setOrClear(TIMER_DELAY, delay);</span>
    }

    /**
     * Returns the default timeout for pending assignments.
     *
     * @return default timeout or -1 if not set
     */
    public int defaultTimeout() {
<span class="nc" id="L284">        return get(DEFAULT_TIMEOUT, DEFAULT);</span>
    }

    /**
     * Sets the default timeout for pending assignments.
     *
     * @param defaultTimeout new default timeout; null to clear
     * @return self
     */
    public BasicElementConfig defaultTimeout(int defaultTimeout) {
<span class="nc" id="L294">        return (BasicElementConfig) setOrClear(DEFAULT_TIMEOUT, defaultTimeout);</span>
    }

    /**
     * Returns the start IP for the available IP Range.
     *
     * @return start IP or null if not set
     */
    public Ip4Address startIp() {
<span class="nc" id="L303">        String ip = get(START_IP, null);</span>
<span class="nc bnc" id="L304" title="All 2 branches missed.">        return ip != null ? Ip4Address.valueOf(ip) : null;</span>
    }

    /**
     * Sets the start IP for the available IP Range.
     *
     * @param startIp new start IP; null to clear
     * @return self
     */
    public BasicElementConfig startIp(String startIp) {
<span class="nc" id="L314">        return (BasicElementConfig) setOrClear(START_IP, startIp);</span>
    }

    /**
     * Returns the end IP for the available IP Range.
     *
     * @return end IP or null if not set
     */
    public Ip4Address endIp() {
<span class="nc" id="L323">        String ip = get(END_IP, null);</span>
<span class="nc bnc" id="L324" title="All 2 branches missed.">        return ip != null ? Ip4Address.valueOf(ip) : null;</span>
    }

    /**
     * Sets the end IP for the available IP Range.
     *
     * @param endIp new end IP; null to clear
     * @return self
     */
    public BasicElementConfig endIp(String endIp) {
<span class="nc" id="L334">        return (BasicElementConfig) setOrClear(END_IP, endIp);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>